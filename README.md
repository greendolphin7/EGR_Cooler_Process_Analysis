# EGR_Cooler_Process_Analysis

EGR Cooler 제품 공정 데이터 분석 2020.08.16




EGR Cooler를 만드는 생산 공정에서의 데이터 추출, 분석을 통해 품질 개선, 공정 개선 및 OEE 측정을 목표로 한다.

현재까지 생각해본 사항으로 프로젝트 진행사항을 정리해보자면 크게 5가지로 나눌 수 있다.

1. 제품에 대한 이해(EGR 쿨러, EGR 밸브), 작동원리, 제품의 역할, 기대하는 품질 수준

2. 제품을 만들기 위한 공정 세부 사항
+ 부품 리스트
+ 재료와 재료 특성
+ 설비의 세부 사항
+ 해당 제품의 BOM

3. 공정 세부 사항 별 나타날 수 있는 상황
+ 예) 가동, 비가동

4. 추출해야 할 데이터 선정, 공정 상황과의 연결, 연결 근거 작성

5. 데이터 분석

(6. 대시보드 만들기)

2020.08.18




프로젝트를 하며 한가지 깊게 깨닫게 된 것이 있다.

데이터 분석은 결국 모든 과정의 맨 마지막 단계라는 것이다.

어떤 데이터를 수집할지 선정하는 단계에서 

왜 그 데이터를 수집해야하는지, 어떤 장비로 수집할 수 있는지에 대해 스스로 납득할 수 있을 만큼 치열하게 고민해야한다.

공정 데이터의 경우에는 특히 그러한 점이 더 크게 작용하는 것 같다.

공정에 대한 상세한 부분까지 알고 있어야하고, 하나의 완제품을 만들기 위해 쓰이는 부품, 재료, 설비, 시간 등등과

그 제품이 하는 역할과 작동원리, 품질에서 기대하는 기대치와 허용치를 모두 다 알아야 한다.

2020.08.19




데이터 선별과정에서 고려해야 할 사항으로는
- 생산실적 데이터
- 설비 데이터
- 작업자 데이터 
- 환경 데이터 
- 순차적 품질데이터
- 생산시점 관리를 위한 데이터 (POP)
- 로봇 작동 데이터
- 설비가 비가동인 경우, 가동인 경우의 현황 데이터

등등이 있다. 

각 중점, 설비, 데이터 수집 장비별로 더 세분화해서 선별할 수 있다.

2020.08.20




데이터를 8월 20일에 데이터 선별 기준으로 8가지를 설정한 기준으로 선별하려고 한다.

공정은 조립공정이라고 가정하고 공정에 들어가는 부품리스트에 대해 찾아보았다.

부품 리스트 (EGR Cooler)
- Body
- Wavy fin
- Flange
- 냉각수 유입 유출 Tube
- Paste (부가 재료)

2020.08.21





오늘은 프로젝트의 분석 목적에 대해 설정해볼 필요가 있었다.

조립 공정에서의 데이터들을 생성하여, 생성된 데이터들을 Train, Test 데이터 셋으로 나눈다.

최종 Target 변수를 양품과 부적합품이라는 2개의 클래스로 나눈 다음, 머신러닝 알고리즘(의사결정나무, Random Forest, XGboost, SVM 등등)을 사용하여 학습시킨다. 

Test 데이터를 사용하여 정확도를 측정한다.

그렇게하여 나온 하나의 학습 모델을 기반으로 새로운 변수를 추가하여 모델을 더 복잡하게 만들어 볼 수 있고,

부적합품을 만들어내는 Factor 들을 추정하거나 서로 다른 데이터들의 상관관계와 인과관계를 유추해볼 수 있도록 한다.

2020.08.22





전체 조립공정에서 나온 완제품이 부적합품으로 판정될 수 있는 기준들을 생각해보았고, 그 기준들과 관련된 데이터들을 선별해 보았다.

여기서, 몇가지 상황들을 미리 가정하고 시작했다.

총 공정은 op10 ~ op60번 공정이 있다.

각각의 공정에서 부품들은 BOM 순서대로 조립된다. 

부품은 총 6개로, A - B - C - D - E - F 이다

그러므로 op10 번 공정에서는 A + B = AB (재공품)이 된다.

본 모델은 가장 간단한 모델로, 하나의 설비에서 작업하는 시간은 10초로 가정하였고, 대기 시간과 이동시간, 셋업시간은 0으로 계산하였다. (추후 더 복잡한 모델로 추가할 예정이다)

마지막 op 60 에서는 전체 완제품에 대한 비전검사를 실시해 부적합 여부를 판단한다.

이러한 공정이라고 가정하였을 때, 데이터들을 선별해 본 결과가 아래이다.

- 제품 치수 (길이, 너비, 높이)
- 조립 압력을 측정하기 위한 전류값
- 비전센서의 환경 변수를 고려하기 위한 조도 값
- 제품의 흠집 여부
- 어떤 작업팀의 관리하에 있었는지에 대한 정보
- 제품 추적을 위한 시계열 데이터
- 최종 양품 여부 (한 공정에서 다음 공정으로 넘어갈 때 적합 여부)

op 40 ~ op 50 의 경우, 용접을 통한 조립이라고 가정하여 용접 온도에 대한 데이터를 추가하였다.

각 데이터들에 대한 형태(binary, distribution)와 부적합품 기준(허용공차)에 대한 논의를 거친 후 데이터들을 랜덤으로 생성할 계획이다.

2020.08.23




각 데이터들에 대한 데이터 형태와 허용 공차

- 부품 치수 : 정규분포(목표값과 분산) 허용공차는 0.01mm으로 예를들어 목표 치수가 50mm 라면 49.99mm ~ 50.01mm까지 양품으로 판정한다.
- 조립 후 재공품 치수 : 설계했던 부품과 부품의 치수를 더해 나간다.
- 제품의 흠집 여부 : 비전센서를 활용해 (0, 1)로 판단한 결과값을 추출 (베르누이 분포, 확률 0.9999999로 1, 1 일 때 양호한 상태)
- 부품과 부품 또는 재공품과 부품간의 조립할 때의 조립 압력 데이터를 얻기 위해 조립 설비에서의 조립 전류값을 출한다. 
- 조립 전류 값의 경우, 일정량 이상으로 넘어가게 되면, 재공품이 파손되거나 손상되기 때문에 최대값과 최소값을 지정해 주어야 한다. (현재로서는 최대, 최소값이 있는 균일분포로 추출)
- op40 ~ op50 의 경우 용접을 통한 조립 작업이기에, 제품의 조립강도를 측정하기 위해 조립용접시 조립시 온도를 측정할 필요가 있다. 조립 전류값과 마찬가지로 최대값과 최소값이 존재하며, 최대, 최소가 있는 균일분포로 넣을 생각이다.
- 비전 센서 사용 시, 조명이 양호한지에 따라 판정 결과에 큰 영향을 받게 된다. 따라서 조도 센서가 양호한지에 대해 추출 (0, 1로 판단한다. 0일 때 제대로 판정하지 못한다고 판단, 관련해 측정력이 어느정도 떨어지는지는 차후 수정해야 한다.) 
- 어떤 작업팀에 의해 관리되고 있었는지에 대한 변수를 넣어주고 기록하기 위해 생산 작업팀에 대한 정보 (3조, 2교대라고 가정. 총 3팀이 일정시간만틈 돌아가며 작업)
- 모든 공정 데이터는 시간데이터가 있어야 제품을 추적할 수 있기 때문에 시간데이터들을 각 공정이 완료된 시점으로 넣어준다. (ex. 2020-08-24-08:12:30)
- 각 공정에서의 제품에 대한 품질 판단을 실시한다고 가정하고, 다음공정으로 넘어가기 전에 양품과 부적합품을 가려낸다. (0, 1)

2020.08.24
